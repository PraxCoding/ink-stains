## Traceroute

> **Traceroute 由 Van Jacobson 于 1988 年 4 月在劳伦斯伯克利国家实验室发明**，当时他需要诊断互联网早期的网络性能问题，却缺乏合适的工具来查看数据包的实际传输路径。**他巧妙地利用了 IP 协议中 TTL（Time To Live）字段的特性，通过逐步增加 TTL 值来探测路径上的每个路由器**，这个工具随后成为 Unix/Linux 系统的标准网络诊断工具。



### 概述

**Traceroute**（在 Windows 上称为 tracert）是一个网络诊断工具，用于追踪数据包从源主机到目标主机所经过的路径。它能让你看到数据包在网络中经过的**路由器 / 交换机**（即负责转发数据包的网络设备）。



### 工作原理

Traceroute 通过利用 IP 数据包头部的 **TTL（生存时间）** 属性来实现路径追踪：

1. **设置递增的 TTL**：Traceroute 会发送一系列数据包，依次将 TTL 设为 1、2、3……
2. **利用 TTL 过期的反馈**：当数据包的 TTL 减到 0 时，会被路由器丢弃，此时路由器会返回一个 “TTL 过期” 的通知消息。
3. **识别路径上的设备**：通过分析这些通知消息的 “来源 IP”，就能识别出数据包路径上的每一台路由器，从而完整呈现传输路径。

即 Traceroute 就像 “给数据包加了个‘倒计时跳数’，每经过一个路由器就减 1，跳数耗尽时路由器会‘举手报告’，通过这些报告就能把整个路径串联起来”。



### 主要功能

Traceroute 可用于网络故障排查、验证路由配置、识别网络瓶颈等用途：

1. **路径追踪**：显示数据包经过的每一个路由器（跳点/hop）
2. **延迟测量**：显示到达每个跳点的往返时间（RTT）
3. **故障诊断**：帮助定位网络连接问题发生的位置

Traceroute 就像给网络路径装了 “分段监控 + 地理追踪” 的放大镜，比 ping 能挖出更多关于网络路径的细节，当然也会遇到一些 “不配合” 的路由器（星号）。